<!--
Google IO 2012/2013 HTML5 Slide Template

Authors: Eric Bidelman <ebidel@gmail.com>
         Luke Mahé <lukem@google.com>

URL: https://code.google.com/p/io-2012-slides
-->
<!DOCTYPE html>
<html>
<head>
  <title></title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta http-equiv="CACHE-CONTROL" content="NO-CACHE">
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">-->
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0">-->
  <!--This one seems to work all the time, but really small on ipad-->
  <!--<meta name="viewport" content="initial-scale=0.4">-->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="stylesheet" media="all" href="theme/css/default.css">
  <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="theme/css/phone.css">
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->
  <script data-main="js/slides" src="js/require-1.0.8.min.js"></script>
</head>
<body style="opacity: 0">

<slides class="layout-regular">

  <div id="includedContent"></div>

  <slide class="logoslide nobackground">
    <article class="flexbox vcenter">
      <span><img src="images/gdpla.png"></span>
    </article>
  </slide>

  <slide class="title-slide segue">
    <!--<aside class="gdbar"><img src="images/google_developers_icon_128.png"></aside>-->
    <aside class="gdbar"><img src="images/gdpla.png"></aside>
    <!-- The content of this hgroup is replaced programmatically through the slide_config.json. -->
    <!--<img class="reflect img-header" src="images/bg_header.png">-->
    <hgroup class="auto-fadein">
      <h1 data-config-title><!-- populated from slide_config.json --></h1>
      <h2 data-config-subtitle><!-- populated from slide_config.json --></h2>
      <p data-config-presenter><!-- populated from slide_config.json --></p>
      <!--<img class="gdp-labs-logo" src="images/gdp_labs.png">-->
    </hgroup>
  </slide>

  <slide>
    <hgroup>
      <h2>Introduction</h2>
    </hgroup>
    <article>
      <ul class="no-style-list">
        <li><b style="color: black">Karol Danutama</b></li>
        <li>Senior Principal Software Development Engineer | GDP Labs</li>
        <li><a href="http://id.linkedin.com/in/glennkristanto">http://id.linkedin.com/in/KarolDanutama</a></li>
        <li>karol.danutama@gdplabs.id</li>
      </ul>
    </article>
    <br>
    <article>
      <ul class="no-style-list">
        <li><b style="color: black">Timotius Nugroho Chandra</b></li>
        <li>Senior Principal Software Development Engineer | GDP Labs</li>
        <li><a href="http://id.linkedin.com/in/timotiuschandra">http://id.linkedin.com/in/TimotiusChandra</a></li>
        <li>timotius.n.chandra@gdplabs.id</li>
      </ul>
    </article>
  </slide>

  <slide class="segue dark nobackground">
    <aside class="gdbar"><img src="images/gdpla.png"></aside>
    <hgroup class="auto-fadein">
      <h2>Background</h2>
      <h3>Why are we building a chat platform?</h3>
    </hgroup>
  </slide>

  <slide>
    <hgroup>
      <h2>Messaging App VS Social Network</h2>
      <h3></h3>
    </hgroup>
    <article class="text-center">
      <img class="reflect" style="width: 650px" src="images/surpassed.jpg">
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Messaging Landscape</h2>
      <h3>More than just for chatting</h3>
    </hgroup>
    <article class="no-margin-top text-center">
      <img class="reflect" src="images/landscape.jpg">
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>What Does It Mean for KASKUS?</h2>
    </hgroup>
    <article class="">
      <ul>
        <li>A natural extension for KASKUS communities</li>
        <li>Keep KASKUS communities <b><u>inside</u></b> KASKUS</li>
      </ul>
    </article>
    <article class="text-center">
      <img class="reflect" style="width: 350px" src="images/kchat.png">
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>What Does It Mean for GDP Venture?</h2>
    </hgroup>
    <article>
      <ul>
        <li>Helps sister companies</li>
        <li>Strategic movement</li>
      </ul>
    </article>
    <article class="text-center">
      <img class="reflect" style="width: 350px" src="images/halobca.png">
    </article>
  </slide>

  <slide class="segue dark nobackground">
    <aside class="gdbar"><img src="images/gdpla.png"></aside>
    <hgroup class="auto-fadein">
      <h2>Brief Timeline</h2>
      <h3>How long have we been developing it?</h3>
    </hgroup>
  </slide>

  <slide>
    <hgroup>
      <h2>Brief Timeline</h2>
      <h3>Will be replaced by a more proper timeline graphic format</h3>
    </hgroup>
    <article class="no-margin-top">
      <ul>
        <li>September 2015: first team established (Android & backend)</li>
        <li>December 2016: Android version released</li>
        <li>January 2016: web version released</li>
        <li>January 2016: Parse sunset plan announced</li>
        <li>February 2016: HaloBCA Chat kick off</li>
        <li>March 2016: group chat feature released</li>
        <li>June 2016: integration with Kaspay bot</li>
        <li>July 2016: Firebase integration released</li>
        <li>September 2016: HaloBCA Chat released</li>
        <li>October 2016: Biggest reliability issue, message lost</li>
        <li>May 2017: encryption feature released</li>
        <li>June 2017: re-focus on fixing reliability issues</li>
        <li>November 2017: beating technical issues</li>
      </ul>
    </article>
    <aside class="note">
      <section>
        Needs visual representation
      </section>
    </aside>
  </slide>

  <slide>
    <hgroup>
      <h2>Tech Stack</h2>
    </hgroup>
    <article class="no-margin-top text-center">
      <img class="reflect" src="images/techstack2.png">
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Whitelabel and Customization</h2>
    </hgroup>
    <article>
        <ul>
            <li>Architecture diagram (KASKUS Chat & BCA)</li>
            <li>Screenshots(?)</li>
        </ul>
    </article>
  </slide>

  <slide class="segue dark nobackground">
    <aside class="gdbar"><img src="images/gdpla.png"></aside>
    <hgroup class="auto-fadein">
      <h2>Challenges</h2>
      <h3>What makes it so hard?</h3>
    </hgroup>
  </slide>

  <slide>
    <hgroup>
      <h2>Challenges</h2>
    </hgroup>
    <article>
        <ul>
            <li>Nature of Real Time Communication</li>
            <li>Encryption</li>
            <li>Push Notification</li>
            <li>Third party dependencies</li>
        </ul>
    </article>
    <aside class="note">
      <section>
        <ul>
          <li>Persistent connection. But battery impact</li>
          <li>When receiving messages notification, people expect the message is there when notification is clicked</li>
          <li>Android - Not all phones allow process to be awaken up</li>
          <li>iOS - By default process is not awaken up when push is received, but there is a workaround for iOS 10 to save to database, but not working anymore for iOS 11</li>
          <li>Ultimate solution: make it VoIP → implement VoIP</li>
          <li>Seamless connection</li>
          <li>Multi-device Message synchronization</li>
        </ul>
      </section>
    </aside>
  </slide>

  <slide class="segue dark quote nobackground">
    <!--<aside class="gdbar right bottom"><img src="images/gdpla.png"></aside>-->
    <article class="flexbox vleft auto-fadein">
      <q>
        Real-time communications (RTC) is any mode of telecommunications in which all users can exchange information instantly or with negligible latency.
      </q>
      <div class="author">
        Anonymous
      </div>
    </article>
    <aside class="note">
      <section>
        <ul>
          <li>to begin this, I'd like to quote a friend of mine</li>
        </ul>
      </section>
    </aside>
  </slide>

  <slide class="segue dark nobackground">
    <aside class="gdbar"><img src="images/gdpla.png"></aside>
    <hgroup class="auto-fadein">
      <h2>Nature of RTC</h2>
      <h3>What are the expected things?</h3>
    </hgroup>
  </slide>

  <slide>
    <hgroup>
      <h2>Nature of Real Time Communication</h2>
      <h3>What are the expected things?</h3>
    </hgroup>
    <article>
        <ul>
          <li>No transmission delay</li>
          <li>Short span of users attention</li>
          <li>Asynchronous</li>
        </ul>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Nature of Real Time Communication</h2>
      <h3>How do we achieve that?</h3>
    </hgroup>
    <article>
        <ul>
          <li>
            <b>Persistent connection!!</b>
            <ul>
              <li>but...battery drain</li>
              <li>but...some OEMs do NOT allow background process</li>
              <li><b>Push Notification</b> to the rescue!!</li>
            </ul>
          </li>
          <li>
            <b>XMPP!!</b>
            <ul>
              <li>Different concept from usual HTTP</li>
              <li>Need to unlearn and relearn</li>
            </ul>
          </li>
        </ul>
    </article>
    <article class="smaller">
      <p style="font-style: italic">Mungkin bisa dijelaskan (lisan) bagaimana kita jadi harus kill connection ketika app ditutup dan kemudian improve mati2an login time di sisi server biar proses login cepat</p>
    </article>
  </slide>

  <slide class="segue dark nobackground">
    <aside class="gdbar"><img src="images/gdpla.png"></aside>
    <hgroup class="auto-fadein">
      <h2>Encryption</h2>
      <h3>How do we protect user's privacy?</h3>
    </hgroup>
  </slide>

  <slide>
    <hgroup>
      <h2>Encryption</h2>
    </hgroup>
    <article class="no-margin-top text-center">
      <img class="reflect" src="images/encryption.png">
    </article>
  </slide>

  <slide class="segue dark nobackground">
    <aside class="gdbar"><img src="images/gdpla.png"></aside>
    <hgroup class="auto-fadein">
      <h2>Push Notification</h2>
      <h3>Why is it so important?</h3>
    </hgroup>
  </slide>

  <slide>
    <hgroup>
      <h2>Push Notification</h2>
      <h3>Content Still Encrypted</h3>
    </hgroup>
    <article class="no-margin-top text-center">
      <video src="videos/IMG_5135.mp4" controls="controls" autoplay loop>Can't play video</video>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Push Notification</h2>
      <h3>Content Has Been Decrypted</h3>
    </hgroup>
    <article class="no-margin-top text-center">
      <video src="videos/IMG_5133.mp4" controls="controls" autoplay loop>Can't play video</video>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Push Notification</h2>
      <h3>Users' expectation</h3>
    </hgroup>
    <article class="no-margin-top">
        <ul>
          <li>Users want decrypted content</li>
          <li>Users want the content to show up instantly when the notification is clicked</li>
          <li>Users want push notification to be dismissed if it's already read on other devices</li>
        </ul>
    </article>
    <article class="smaller">
      <p style="font-style: italic">Ingatkan user tentang challenge di awal (bagian "Nature of RTC"): some phones do NOT allow background process,
        sehingga kita harus mengimplementasikan silent push di iOS.
        Namun demikian, silent push tidak bekerja di iOS 11
        kecuali aplikasinya bertipe VoIP (ada di slide selanjutnya).</p>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Push Notification on iOS</h2>
    </hgroup>
    <article class="no-margin-top text-center">
      <img class="reflect" src="images/silentpush.png">
    </article>
    <article style="margin-top: 36px">
      <p>Only VoIP apps are allowed to execute silent push.<br>
      <br>
      We need to implement a VoIP feature (voice call) just to enable push notification.</p>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Push Notification on Android</h2>
    </hgroup>
    <article class="no-margin-top text-center">
      <img class="reflect" style="width: 500px" src="images/autostart2.png">
    </article>
    <article style="margin-top: 24px" class="smaller">
      <p>Some Android phones prevent some apps to execute background process.<br>
      We need to educate user about this so they can enable auto-start for our chat app.</p>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Push Notification Synchronization</h2>
      <h3>Auto Dismiss Push Notification</h3>
    </hgroup>
    <article class="no-margin-top text-center">
      <video src="videos/IMG_5134.mp4" controls="controls" autoplay loop>Can't play video</video>
    </article>
  </slide>

  <slide class="segue dark nobackground">
    <aside class="gdbar"><img src="images/gdpla.png"></aside>
    <hgroup class="auto-fadein">
      <h2>Third Party Dependencies</h2>
      <h3>Livin' at the mercy of others</h3>
    </hgroup>
  </slide>

  <slide>
    <hgroup>
      <h2>Third Party Dependencies</h2>
      <h3>Push Notification Provider</h3>
    </hgroup>
    <article>
      <table>
        <tr>
          <th></th><th>Parse</th><th>FCM</th>
        </tr>
        <tr>
          <td>Device Management</td><td>✔</td><td>❌</td>
        </tr>
        <tr>
          <td>User Management</td><td>✔</td><td>❌</td>
        </tr>
        <tr>
          <td>Topic-Based Push</td><td>✔</td><td>✔</td>
        </tr>
        <tr>
          <td>Remote Configuration</td><td>✔</td><td>✔</td>
        </tr>
        <tr>
          <td>BaaS for Data Layers</td><td>✔</td><td>❌</td>
        </tr>
      </table>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Third Party Dependencies</h2>
      <h3>Cellular Provider</h3>
    </hgroup>
    <article>
      <ul>
        <li>Many users report long connecting issue</li>
        <li>Happened intermittently</li>
        <li style="color: red"><b>Cause: failure resolving hostname IP address</b></li>
        <li>Tried moving NS from Route53 to KASKUS DNS: did not work</li>
        <li>Tried using .com domain: did not work</li>
      </ul>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Third Party Dependencies</h2>
      <h3>Cellular Provider</h3>
    </hgroup>
    <article>
      <ul>
        <li>
          Use direct IP address using HAProxy
          <ul>
            <li>AWS ELB does not support direct IP address</li>
          </ul>
        </li>
        <li>
          What we did
          <ul>
            <li><b>Setup 2 HAProxy for high availability</b></li>
            <li><b>Modify client to implement endpoint picking algorithm</b></li>
          </ul>
        </li>
      </ul>
    </article>
  </slide>

  <slide class="segue dark nobackground">
    <aside class="gdbar"><img src="images/gdpla.png"></aside>
    <hgroup class="auto-fadein">
      <h2>Conclusion</h2>
      <h3>Recapping...</h3>
    </hgroup>
  </slide>

  <slide>
    <hgroup>
      <h2>Challenges and Solutions</h2>
    </hgroup>
    <article>
      <table>
        <tr>
          <th></th><th>Challenge(s)</th><th>Solution(s)</th>
        </tr>
        <tr>
          <td>Nature of RTC</td>
          <td>
            <ul>
              <li>Persistent Connection</li>
              <li>XMPP</li>
            </ul>
          </td>
          <td>
            <ul>
              <li>Push Notification</li>
              <li>Unlearn and relearn</li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>Encryption</td><td>Many choices</td><td>E2E encryption with service provider</td>
        </tr>
        <tr>
          <td>Push Notification</td>
          <td>
            <ul>
              <li>Limited background process</li>
              <li>Different behavior due to fragmented Android versions</li>
            </ul>
          </td>
          <td>
            <ul>
              <li>Silent push</li>
              <li>VoIP feature</li>
              <li>Educate user regarding auto-start</li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>Third Party Dependencies</td>
          <td>
            <ul>
              <li>Parse vs FCM</li>
              <li>Cellular provider</li>
            </ul>
          </td>
          <td>
            <ul>
              <li>Write extensible code</li>
              <li>Persevere and be resourceful!</li>
            </ul>
          </td>
        </tr>
      </table>
    </article>
  </slide>

  <slide class="thank-you-slide segue nobackground">
    <aside class="gdbar right"><img src="images/gdpla.png"></aside>
    <article class="flexbox vleft auto-fadein">
      <h2>&lt;Thank You!&gt;</h2>
      <p>Questions / Comments</p>
    </article>
    <p class="auto-fadein" data-config-contact>
      <!-- populated from slide_config.json -->
    </p>
  </slide>

  <slide>
    <hgroup>
      <h2>Real Time</h2>
    </hgroup>
    <article class="no-margin-top xml">
        <pre class="prettyprint" style="width: 500px; left:0">
&lt;?xml version='1.0'&gt;
  &lt;stream:stream to='discovery.nasa.guv'
  xmlns='jabber:client'
  xmlns:stream='http://etherx.jabber.org/streams'
  version='1.0'&gt;
&lt;/script&gt;
</pre>
        <pre class="prettyprint" style="width: 500px; margin-left: auto">
&lt;?xml version='1.0'&gt;
  &lt;stream:stream to='discovery.nasa.guv'
  xmlns='jabber:client'
  xmlns:stream='http://etherx.jabber.org/streams'
  version='1.0'&gt;
&lt;/script&gt;</pre>

        <pre class="prettyprint" style="width: 500px; left:0">
&lt;message from='DaveBowman@discovery.nasa.guv/pod&gt;
  to='Hal@discovery.nasa.guv'
  xml:lang='en'
  &lt;body&gt;Hello, Hal. Do you read me, Hal?&lt;/body&gt;
&lt;/message&gt;
</pre>
        <pre class="prettyprint" style="width: 500px; margin-left: auto">
&lt;message from='Hal@discovery.nasa.guv/pod&gt;
  to='Hal@discovery.nasa.guv'
  xml:lang='en'
  &lt;body&gt;Affirmative, Dave. I read you&lt;/body&gt;
&lt;/message&gt;
</pre>

        <pre class="prettyprint" style="width: 500px; left:0">
&lt;/stream:stream&gt;
</pre>
        <pre class="prettyprint" style="width: 500px; margin-left: auto">
&lt;/stream:stream&gt;
</pre>
    </article>
  </slide>

  <slide class="backdrop"></slide>

</slides>

<script>
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-XXXXXXXX-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

<!--[if IE]>
  <script src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js"></script>
  <script>CFInstall.check({mode: 'overlay'});</script>
<![endif]-->
</body>
</html>
